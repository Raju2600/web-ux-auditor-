import React,{useState,useCallback,useEffect}from'react';import ReactDOM from'react-dom/client';import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer,PieChart,Pie,Cell as RechartsCell,FunnelChart,Funnel,LabelList}from'recharts';const MOCK_DATA={loadSpeed:{score:85,fcp:1.2,lcp:2.1,cls:0.05},accessibility:{score:92,issues:[{issue:"Low contrast text",explanation:"Text on the main banner has a contrast ratio of 3.1:1, which is below the WCAG AA requirement of 4.5:1.",recommendation:"Increase the text color brightness or darken the background to improve the contrast ratio."}]},popupBehavior:{popups:[{type:"Newsletter Signup",trigger:"10s on page",intrusiveness:"Medium"}]},dashboard:{totalSessions:1240,bounceRate:45.6,avgSessionDuration:135,deviceBreakdown:[{name:'Desktop',value:744},{name:'Mobile',value:434},{name:'Tablet',value:62}]},heatmaps:[{type:'click',points:[{x:50,y:20,intensity:0.9},{x:55,y:45,intensity:0.8},{x:30,y:60,intensity:0.6}],aiSummary:"Users primarily click on the main call-to-action and the navigation bar. There are very few clicks on the footer links, suggesting low engagement with that section."},{type:'scroll',points:[{x:50,y:0,intensity:1},{x:50,y:25,intensity:0.95},{x:50,y:50,intensity:0.7},{x:50,y:75,intensity:0.3},{x:50,y:100,intensity:0.1}],aiSummary:"Over 70% of users scroll past the hero section, but engagement drops significantly below the fold. Only 10% of users reach the bottom of the page."}],conversionFunnel:{steps:[{name:'Visited Homepage',userCount:1000},{name:'Viewed Product',userCount:450},{name:'Added to Cart',userCount:150},{name:'Purchased',userCount:50}],aiSummary:"The largest drop-off occurs between viewing a product and adding it to the cart (66% drop). This suggests potential issues with product pages, pricing, or the 'Add to Cart' button's visibility."},usabilityTests:[{participant:{id:'P01',location:'USA',device:'Desktop',demographics:"Age 25-34, Tech Enthusiast"},transcript:"Okay, so I'm on the homepage... looks clean. I want to find the pricing. Hmm, I don't see it in the main nav. Maybe under 'Features'? No... oh, there it is, a small link in the footer. That took a while.",highlightReel:[{timestamp:"0:25",quote:"Hmm, I don't see it in the main nav... That took a while.",tag:'Frustration',aiSummary:"User struggled to find the pricing page, indicating poor information architecture in the main navigation."}],aiOverallSummary:"Participants generally found the site visually appealing but struggled with navigation. Key information like pricing was difficult to locate, causing frustration and increasing task completion time."}]};const auditWebsite=async(url)=>{console.log(`Auditing ${url}...`);return new Promise(resolve=>{setTimeout(()=>resolve(MOCK_DATA),1500)})};const Spinner=()=>(React.createElement("div",{className:"flex justify-center items-center p-8"},React.createElement("svg",{className:"animate-spin h-12 w-12 text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","strokeWidth":"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))));const AuditHistory=({history,onSelect,onClear})=>(React.createElement("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700 w-full animate-fade-in"},React.createElement("h3",{className:"text-lg font-bold text-slate-300 mb-3"},"Audit History"),React.createElement("div",{className:"space-y-2 max-h-96 overflow-y-auto"},history.map((item,index)=>(React.createElement("button",{key:index,onClick:()=>onSelect(item),className:"w-full text-left p-2 rounded-md bg-slate-700/50 hover:bg-slate-700 transition duration-150"},React.createElement("p",{className:"text-sm font-medium text-brand-teal truncate"},item.url),React.createElement("p",{className:"text-xs text-slate-400"},new Date(item.date).toLocaleString()))))),React.createElement("button",{onClick:onClear,className:"w-full mt-3 text-sm bg-red-800/50 hover:bg-red-800 text-red-300 py-1.5 rounded-md transition duration-150"},"Clear History")));const Sidebar=({activeView,setActiveView})=>{const views=[{id:'dashboard',label:'Dashboard'},{id:'heatmaps',label:'Heatmaps'},{id:'funnels',label:'Funnels'},{id:'usability',label:'Usability Tests'}];return React.createElement("nav",{className:"flex lg:flex-col gap-1 bg-slate-800 p-2 rounded-lg"},views.map(view=>(React.createElement("button",{key:view.id,onClick:()=>setActiveView(view.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 w-full text-left lg:w-48 ${activeView===view.id?'bg-brand-blue text-white':'text-slate-300 hover:bg-slate-700'}`},view.label))))};const Card=({title,children,className})=>React.createElement("div",{className:`bg-slate-800 p-6 rounded-lg border border-slate-700 ${className}`},React.createElement("h3",{className:"text-xl font-bold mb-4 text-slate-200"},title),children);const Dashboard=({data})=>{const{loadSpeed,accessibility,dashboard}=data;const deviceColors=['#00BFFF','#00F5D4','#8884d8'];return React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in"},React.createElement(Card,{title:"Overall Score",className:"md:col-span-2 lg:col-span-3 bg-slate-800/50 flex justify-around items-center text-center p-8"},React.createElement("div",null,React.createElement("p",{className:"text-5xl font-bold text-green-400"},Math.round((loadSpeed.score+accessibility.score)/2)),React.createElement("p",{className:"text-slate-400"},"Average Score")),React.createElement("div",null,React.createElement("p",{className:"text-5xl font-bold text-brand-blue"},dashboard.totalSessions),React.createElement("p",{className:"text-slate-400"},"Total Sessions")),React.createElement("div",null,React.createElement("p",{className:"text-5xl font-bold text-brand-teal"},dashboard.bounceRate,"%"),React.createElement("p",{className:"text-slate-400"},"Bounce Rate"))),React.createElement(Card,{title:"Core Web Vitals"},React.createElement("div",{className:"space-y-3 text-lg"},React.createElement("p",null,"LCP: ",React.createElement("span",{className:"font-bold text-white"},loadSpeed.lcp,"s")),React.createElement("p",null,"FCP: ",React.createElement("span",{className:"font-bold text-white"},loadSpeed.fcp,"s")),React.createElement("p",null,"CLS: ",React.createElement("span",{className:"font-bold text-white"},loadSpeed.cls)))),React.createElement(Card,{title:"Device Breakdown"},React.createElement(ResponsiveContainer,{width:"100%",height:200},React.createElement(PieChart,null,React.createElement(Pie,{data:dashboard.deviceBreakdown,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:d=>d.name},dashboard.deviceBreakdown.map((entry,index)=>(React.createElement(RechartsCell,{key:`cell-${index}`,fill:deviceColors[index%deviceColors.length]})))),React.createElement(Tooltip,null)))),React.createElement(Card,{title:"Accessibility Issues",className:"md:col-span-2 lg:col-span-3"},React.createElement("div",{className:"space-y-4"},accessibility.issues.map((issue,i)=>(React.createElement("div",{key:i,className:"p-3 bg-slate-700/50 rounded-md"},React.createElement("p",{className:"font-semibold text-red-400"},issue.issue),React.createElement("p",{className:"text-sm text-slate-300 mt-1"},issue.recommendation)))))))};const Heatmap=({data})=>{const[activeMap,setActiveMap]=useState(data[0].type);const currentMap=data.find(m=>m.type===activeMap);return React.createElement(Card,{title:"Heatmaps",className:"animate-fade-in"},React.createElement("div",{className:"flex gap-2 mb-4"},data.map(map=>(React.createElement("button",{key:map.type,onClick:()=>setActiveMap(map.type),className:`px-3 py-1 text-sm rounded-md ${activeMap===map.type?'bg-brand-blue text-white':'bg-slate-700 hover:bg-slate-600'}`},map.type.charAt(0).toUpperCase()+map.type.slice(1)," Map")))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-2 relative w-full h-96 bg-slate-700 rounded-lg overflow-hidden"},React.createElement("p",{className:"text-center p-4 text-slate-400"},"Visual representation of user interactions"),currentMap&&currentMap.points.map((p,i)=>(React.createElement("div",{key:i,className:"absolute rounded-full -translate-x-1/2 -translate-y-1/2",style:{left:`${p.x}%`,top:`${p.y}%`,width:`${p.intensity*50}px`,height:`${p.intensity*50}px`,background:`rgba(255,0,0,${p.intensity*0.5})`,boxShadow:`0 0 ${p.intensity*20}px rgba(255,0,0,${p.intensity*0.7})`}})))),React.createElement("div",null,React.createElement("h4",{className:"font-bold text-lg mb-2"},"AI Summary"),React.createElement("p",{className:"text-slate-300 text-sm"},currentMap?.aiSummary))))};const Funnels=({data})=>{const{steps,aiSummary}=data;const chartData=steps.map((step,index)=>({name:step.name,uv:step.userCount,pv:index>0?steps[index-1].userCount:step.userCount}));return React.createElement(Card,{title:"Conversion Funnel",className:"animate-fade-in"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-2 h-96"},React.createElement(ResponsiveContainer,{width:"100%",height:"100%"},React.createElement(BarChart,{layout:"vertical",data:chartData,margin:{top:20,right:30,left:20,bottom:5}},React.createElement(XAxis,{type:"number",domain:[0,'dataMax + 100'],hide:true}),React.createElement(YAxis,{type:"category",dataKey:"name",width:120,axisLine:false,tickLine:false,tick:{fill:'#94a3b8'}}),React.createElement(Tooltip,{formatter:(value,name,props)=>[`${value} Users`,`${(value/props.payload.pv*100).toFixed(1)}% Conversion`||""]}),React.createElement(Bar,{dataKey:"uv",fill:"#00BFFF"},React.createElement(LabelList,{dataKey:"uv",position:"right",fill:"#ffffff"}))))),React.createElement("div",null,React.createElement("h4",{className:"font-bold text-lg mb-2"},"AI Summary"),React.createElement("p",{className:"text-slate-300 text-sm"},aiSummary))))};const UsabilityTesting=({data})=>{return React.createElement(Card,{title:"Usability Test Analysis",className:"animate-fade-in"},React.createElement("div",{className:"space-y-8"},data.map((test,i)=>(React.createElement("div",{key:i,className:"bg-slate-800/50 p-4 rounded-lg"},React.createElement("div",{className:"mb-4"},React.createElement("h4",{className:"font-bold text-lg text-brand-teal"},`Participant ${test.participant.id}`),React.createElement("p",{className:"text-sm text-slate-400"},`${test.participant.demographics} | ${test.participant.device}, ${test.participant.location}`)),React.createElement("div",{className:"mb-4"},React.createElement("h5",{className:"font-semibold mb-2 text-slate-300"},"Key Moments"),React.createElement("div",{className:"space-y-2"},test.highlightReel.map((h,j)=>(React.createElement("div",{key:j,className:"border-l-2 pl-3",style:{borderColor:h.tag==='Frustration'?'#ef4444':'#22c55e'}},React.createElement("p",{className:"text-sm italic text-slate-200"},`"${h.quote}"`),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},`[${h.timestamp}] - `,h.aiSummary)))))),React.createElement("div",null,React.createElement("h5",{className:"font-semibold mb-2 text-slate-300"},"AI Overall Summary"),React.createElement("p",{className:"text-sm text-slate-300"},test.aiOverallSummary)))))))};const URLInputForm=({url,setUrl,onAudit,isLoading})=>{const handleSubmit=e=>{e.preventDefault();onAudit()};return React.createElement("form",{onSubmit:handleSubmit,className:"flex flex-col sm:flex-row gap-3 w-full max-w-2xl mx-auto"},React.createElement("input",{type:"url",value:url,onChange:e=>setUrl(e.target.value),placeholder:"https://example.com",required:true,className:"flex-grow bg-slate-800 text-white placeholder-slate-500 px-4 py-3 rounded-md border border-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-blue transition duration-200",disabled:isLoading}),React.createElement("button",{type:"submit",disabled:isLoading,className:"bg-brand-blue text-white font-bold px-6 py-3 rounded-md hover:bg-sky-400 transition duration-200 disabled:bg-slate-600 disabled:cursor-not-allowed flex items-center justify-center gap-2"},isLoading?'Auditing...':'Analyze Website'))};const App=()=>{const[url,setUrl]=useState('');const[analysisResult,setAnalysisResult]=useState(null);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[auditHistory,setAuditHistory]=useState([]);const[activeView,setActiveView]=useState('dashboard');useEffect(()=>{try{const storedHistory=localStorage.getItem('auditHistory');if(storedHistory){setAuditHistory(JSON.parse(storedHistory))}}catch(e){console.error("Failed to load audit history from localStorage",e);localStorage.removeItem('auditHistory')}},[]);const handleAudit=useCallback(async()=>{if(!url){setError('Please enter a valid URL.');return}setIsLoading(true);setError(null);setAnalysisResult(null);setActiveView('dashboard');try{const result=await auditWebsite(url);setAnalysisResult(result);const newHistoryItem={url,date:new Date().toISOString(),report:result};const updatedHistory=[newHistoryItem,...auditHistory.filter(item=>item.url!==url)];setAuditHistory(updatedHistory);localStorage.setItem('auditHistory',JSON.stringify(updatedHistory))}catch(err){setError(err instanceof Error?err.message:'An unexpected error occurred.')}finally{setIsLoading(false)}},[url,auditHistory]);const handleSelectHistory=useCallback(item=>{setUrl(item.url);setAnalysisResult(item.report);setError(null);setIsLoading(false);setActiveView('dashboard')},[]);const handleClearHistory=useCallback(()=>{setAuditHistory([]);localStorage.removeItem('auditHistory')},[]);const renderActiveView=()=>{if(!analysisResult)return null;switch(activeView){case'dashboard':return React.createElement(Dashboard,{data:analysisResult});case'heatmaps':return React.createElement(Heatmap,{data:analysisResult.heatmaps});case'funnels':return React.createElement(Funnels,{data:analysisResult.conversionFunnel});case'usability':return React.createElement(UsabilityTesting,{data:analysisResult.usabilityTests});default:return React.createElement(Dashboard,{data:analysisResult})}};return React.createElement("div",{className:"min-h-screen bg-slate-900 font-sans p-4 sm:p-8"},React.createElement("div",{className:"container mx-auto max-w-7xl"},React.createElement("header",{className:"text-center mb-8"},React.createElement("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-brand-blue to-brand-teal"},"AI UX Auditor Pro"),React.createElement("p",{className:"text-lg text-slate-400"},"Comprehensive, AI-powered behavioral analytics for any website.")),React.createElement("main",{className:"flex flex-col"},React.createElement("div",{className:"mb-10"},React.createElement(URLInputForm,{url:url,setUrl:setUrl,onAudit:handleAudit,isLoading:isLoading})),auditHistory.length>0&&!analysisResult&&!isLoading&&React.createElement(AuditHistory,{history:auditHistory,onSelect:handleSelectHistory,onClear:handleClearHistory}),isLoading&&React.createElement(Spinner,null),error&&React.createElement("div",{className:"bg-red-900/50 border border-red-700 text-red-300 p-4 rounded-lg text-center max-w-2xl mx-auto"},React.createElement("strong",null,"Error:")," ",error),analysisResult&&React.createElement("div",{className:"flex flex-col lg:flex-row gap-6 items-start"},React.createElement("div",{className:"w-full lg:w-auto"},React.createElement(Sidebar,{activeView:activeView,setActiveView:setActiveView}),React.createElement("div",{className:"mt-6 block lg:hidden"},React.createElement(AuditHistory,{history:auditHistory,onSelect:handleSelectHistory,onClear:handleClearHistory}))),React.createElement("div",{className:"flex-grow w-full"},renderActiveView()),React.createElement("div",{className:"w-64 hidden lg:block"},React.createElement(AuditHistory,{history:auditHistory,onSelect:handleSelectHistory,onClear:handleClearHistory}))))))};const rootElement=document.getElementById('root');if(!rootElement){throw new Error("Could not find root element to mount to")}const root=ReactDOM.createRoot(rootElement);root.render(React.createElement(React.StrictMode,null,React.createElement(App,null)));